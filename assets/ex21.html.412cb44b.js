import{_ as l,r,o as t,c as i,a as o,b as s,F as a,d as e,e as c}from"./app.91d0dc40.js";const b={},d=o("h1",{id:"\u7EC3\u4E60-21-\u6587\u4EF6\u7CFB\u7EDF-\u4FEE\u6539\u6839\u76EE\u5F55-chroot",tabindex:"-1"},[o("a",{class:"header-anchor",href:"#\u7EC3\u4E60-21-\u6587\u4EF6\u7CFB\u7EDF-\u4FEE\u6539\u6839\u76EE\u5F55-chroot","aria-hidden":"true"},"#"),e(" \u7EC3\u4E60 21\uFF1A\u6587\u4EF6\u7CFB\u7EDF\uFF1A\u4FEE\u6539\u6839\u76EE\u5F55\uFF0C"),o("code",null,"chroot")],-1),p=e("\u539F\u6587\uFF1A"),h={href:"https://archive.fo/h9FWU",target:"_blank",rel:"noopener noreferrer"},u=e("Exercise 21. Filesystems: changing root directory, chroot"),m=e("\u8BD1\u8005\uFF1A"),_={href:"https://github.com/wizardforcel",target:"_blank",rel:"noopener noreferrer"},v=e("\u98DE\u9F99"),x=e("\u534F\u8BAE\uFF1A"),f={href:"http://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",rel:"noopener noreferrer"},g=e("CC BY-NC-SA 4.0"),k=e("\u81EA\u8C6A\u5730\u91C7\u7528"),y={href:"https://translate.google.cn/",target:"_blank",rel:"noopener noreferrer"},C=e("\u8C37\u6B4C\u7FFB\u8BD1"),q=e("\u8BA9\u6211\u4ECE\u53E6\u4E00\u4E2A"),w={href:"http://en.wikipedia.org/wiki/Chroot",target:"_blank",rel:"noopener noreferrer"},N=e("\u7EF4\u57FA\u767E\u79D1"),B=e("\u7684\u5F15\u7528\u5F00\u59CB\uFF1A"),E=o("blockquote",null,[o("p",null,[e("Unix \u64CD\u4F5C\u7CFB\u7EDF\u4E0A\u7684"),o("code",null,"chroot"),e("\u662F\u4E00\u4E2A\u64CD\u4F5C\uFF0C\u53EF\u4EE5\u4E3A\u5F53\u524D\u6B63\u5728\u8FD0\u884C\u7684\u8FDB\u7A0B\u53CA\u5176\u8FDB\u7A0B\u4FEE\u6539\u6839\u76EE\u5F55\u3002\u5728\u8FD9\u79CD\u4FEE\u6539\u540E\u7684\u73AF\u5883\u4E2D\u8FD0\u884C\u7684\u7A0B\u5E8F\uFF0C\u4E0D\u80FD\u6307\u5B9A\uFF08\u4E5F\u5C31\u662F\u8BBF\u95EE\uFF09\u8FD9\u4E2A\u7279\u5B9A\u76EE\u5F55\u6811\u4E4B\u5916\u7684\u6587\u4EF6\u3002\u672F\u8BED"),o("code",null,"chroot"),e("\u53EF\u4EE5\u6307"),o("code",null,"chroot(2)"),e("\u7CFB\u7EDF\u8C03\u7528\u6216"),o("code",null,"chroot(8)"),e("\u5305\u88C5\u7A0B\u5E8F\u3002\u4FEE\u6539\u540E\u7684\u73AF\u5883\u79F0\u4E3A"),o("code",null,"chroot"),e("\u76D1\u7262\u3002")])],-1),F=e("\u8FD9\u610F\u5473\u7740\u4F60\u53EF\u4EE5\u521B\u5EFA\u4E00\u4E2A\u76EE\u5F55\uFF08\u4F8B\u5982"),V=o("code",null,"/opt/root",-1),L=e("\uFF09\uFF0C\u5C06\u5FC5\u8981\u7684\u7A0B\u5E8F\u590D\u5236\u5230\u90A3\u91CC\u5E76\u6267\u884C\u6B64\u7A0B\u5E8F\u3002\u5BF9\u4E8E\u8FD9\u6837\u7684\u7A0B\u5E8F\uFF0C"),U=o("code",null,"/opt/root/",-1),I=e("\u5C31\u662F\u6839\u76EE\u5F55"),S=o("code",null,"/",-1),z=e("\u3002\u8981\u4E86\u89E3\u4E3A\u4EC0\u4E48\u4F60\u9700\u8981\u8FD9\u6837\uFF0C\u8BF7\u9605\u8BFB\u7EF4\u57FA\u767E\u79D1"),A={href:"http://en.wikipedia.org/wiki/Chroot%23Uses",target:"_blank",rel:"noopener noreferrer"},T=o("code",null,"chroot",-1),W=e("\u6587\u7AE0\u3002"),Y=c(`<p>\u8FD9\u662F\u7EC3\u4E60\u7684\u65F6\u5019\u4E86\u3002\u4F60\u73B0\u5728\u5C06\u4F7F\u7528 bash \u521B\u5EFA\u4E00\u4E2A\u6700\u5C0F\u7684<code>chroot</code>\u73AF\u5883\u3002\u4E3A\u6B64\uFF0C\u4F60\u5C06\u521B\u5EFA\u4E00\u4E2A\u76EE\u5F55\u7ED3\u6784\uFF0C\u5E76\u5C06 bash \u53CA\u5176\u4F9D\u8D56\u9879\u590D\u5236\u5230\u5176\u4E2D\u3002</p><p>\u73B0\u5728\uFF0C\u4F60\u5C06\u5B66\u4E60\u5982\u4F55\u521B\u5EFA\u4E00\u4E2A<code>chroot</code>\u73AF\u5883\u5E76\u8FDB\u5165\u5B83\u3002</p><h2 id="\u8FD9\u6837\u505A" tabindex="-1"><a class="header-anchor" href="#\u8FD9\u6837\u505A" aria-hidden="true">#</a> \u8FD9\u6837\u505A</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> 1: sudo -s
 2: ldd /bin/bash
 3: mkdir -vp /opt/root/bin
 4: mkdir -v /opt/root/lib
 5: mkdir -v /opt/root/lib64
 6: cp -v /bin/bash /opt/root/bin/
 7: cp -v /lib/libncurses.so.5 /opt/root/lib/
 8: cp -v /lib/libdl.so.2 /opt/root/lib
 9: cp -v /lib/libc.so.6 /opt/root/lib
10: cp -v /lib64/ld-linux-x86-64.so.2 /opt/root/lib64
11: chroot /opt/root/
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>\u54C7\u54E6\uFF0C\u4F60\u4E3A\u4F60\u81EA\u5DF1\u521B\u5EFA\u4E86\u4E00\u4E2A Linux\uFF0C\u67D0\u79CD\u7A0B\u5EA6\u4E0A\u662F\u8FD9\u6837\u3002</p><h2 id="\u4F60\u4F1A\u770B\u5230\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#\u4F60\u4F1A\u770B\u5230\u4EC0\u4E48" aria-hidden="true">#</a> \u4F60\u4F1A\u770B\u5230\u4EC0\u4E48</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>user1@vm1:/opt~ sudo -s
root@vm1:/opt# ldd /bin/bash
        linux-vdso.so.1 =&gt;  (0x00007fff17bff000)
        libncurses.so.5 =&gt; /lib/libncurses.so.5 (0x00007f4b1edc6000)
        libdl.so.2 =&gt; /lib/libdl.so.2 (0x00007f4b1ebc2000)
        libc.so.6 =&gt; /lib/libc.so.6 (0x00007f4b1e85f000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f4b1f012000)
root@vm1:/opt# mkdir -vp /opt/root/bin
mkdir: created directory \`/opt/root&#39;
mkdir: created directory \`/opt/root/bin&#39;
root@vm1:/opt# mkdir -v /opt/root/lib
mkdir: created directory \`/opt/root/lib&#39;
root@vm1:/opt# mkdir -v /opt/root/lib64
mkdir: created directory \`/opt/root/lib64&#39;
root@vm1:/opt# cp -v /bin/bash /opt/root/bin/
\`/bin/bash&#39; -&gt; \`/opt/root/bin/bash&#39;
root@vm1:/opt# cp -v /lib/libncurses.so.5 /opt/root/lib/
\`/lib/libncurses.so.5&#39; -&gt; \`/opt/root/lib/libncurses.so.5&#39;
root@vm1:/opt# cp -v /lib/libdl.so.2 /opt/root/lib
\`/lib/libdl.so.2&#39; -&gt; \`/opt/root/lib/libdl.so.2&#39;
root@vm1:/opt# cp -v /lib/libc.so.6 /opt/root/lib
\`/lib/libc.so.6&#39; -&gt; \`/opt/root/lib/libc.so.6&#39;
root@vm1:/opt# cp -v /lib64/ld-linux-x86-64.so.2 /opt/root/lib64
\`/lib64/ld-linux-x86-64.so.2&#39; -&gt; \`/opt/root/lib64/ld-linux-x86-64.so.2&#39;
root@vm1:/opt# chroot /opt/root/
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="\u89E3\u91CA" tabindex="-1"><a class="header-anchor" href="#\u89E3\u91CA" aria-hidden="true">#</a> \u89E3\u91CA</h2><ol><li>\u4F5C\u4E3A\u8D85\u7EA7\u7528\u6237\uFF08root\uFF09\u6267\u884C bash\u3002</li><li>\u6253\u5370\u51FA bash \u9700\u8981\u7684\u7684\u5E93\u3002</li><li>\u5728\u4E00\u4E2A\u547D\u4EE4\u4E2D\u521B\u5EFA<code>/opt/root/</code>\u548C<code>/opt/root/bin/</code>\u76EE\u5F55\u3002\u5F88\u5E05\u5427\uFF1F</li><li>\u521B\u5EFA<code>/opt/root/lib</code>\u76EE\u5F55\u3002</li><li>\u521B\u5EFA<code>/opt/root/lib64</code>\u76EE\u5F55\u3002</li><li>\u5C06<code>/bin/bash</code>\u590D\u5236\u5230<code>/opt/root/bin/</code>\u3002</li><li>\u5C06<code>/lib/libncurses.so.5</code>\u590D\u5236\u5230<code>/opt/root/lib/</code>\u3002</li><li>\u5C06<code>/lib/libdl.so.2</code>\u590D\u5236\u5230<code>/opt/root/lib/</code>\u3002</li><li>\u5C06<code>/lib/libc.so.6</code>\u590D\u5236\u5230<code>/opt/root/lib/</code>\u3002</li><li>\u5C06<code>/lib64/ld-linux-x86-64.so.2</code>\u590D\u5236\u5230<code>/opt/root/lib64/</code>\u3002</li><li>\u5C06\u6839\u76EE\u5F55\u66F4\u6539\u4E3A<code>/opt/root/</code>\u3002</li></ol><h2 id="\u9644\u52A0\u9898" tabindex="-1"><a class="header-anchor" href="#\u9644\u52A0\u9898" aria-hidden="true">#</a> \u9644\u52A0\u9898</h2><ul><li>\u9605\u8BFB<code>man chroot</code>\uFF0C<code>man ldd</code>\u3002</li><li>\u5C06<code>ls</code>\u547D\u4EE4\u590D\u5236\u5230\u4F60\u7684<code>chroot</code>\u5E76\u4F7F\u5176\u6B63\u5E38\u5DE5\u4F5C\u3002</li><li>\u4E00\u4E2A\u96BE\u9898\uFF1A\u5C06<code>vim</code>\u590D\u5236\u5230\u4F60\u7684<code>chroot</code>\u5E76\u4F7F\u5176\u6B63\u5E38\u5DE5\u4F5C\u3002</li></ul>`,11);function j(D,G){const n=r("ExternalLinkIcon");return t(),i(a,null,[d,o("blockquote",null,[o("p",null,[p,o("a",h,[u,s(n)])])]),o("blockquote",null,[o("p",null,[m,o("a",_,[v,s(n)])])]),o("blockquote",null,[o("p",null,[x,o("a",f,[g,s(n)])])]),o("blockquote",null,[o("p",null,[k,o("a",y,[C,s(n)])])]),o("p",null,[q,o("a",w,[N,s(n)]),B]),E,o("p",null,[F,V,L,U,I,S,z,o("a",A,[T,s(n)]),W]),Y],64)}var J=l(b,[["render",j]]);export{J as default};
